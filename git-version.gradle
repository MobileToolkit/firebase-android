def gitCommitCount = Integer.parseInt('git rev-list HEAD --count'.execute([], project.rootDir).text.trim())

def gitCurrentTag = 'git tag'.execute([], project.rootDir).text.trim().isAllWhitespace() ? "0.0.0-DEV-$gitCommitCount" : 'git describe --tags'.execute([], project.rootDir).text.trim()

def gitCurrentCommitTimestamp = Integer.parseInt('git log -1 --pretty=format:%ct'.execute([], project.rootDir).text.trim())

ext {
    gitVersionCode = gitCommitCount
    gitVersionName = gitCurrentTag
    gitVersionCodeTime = gitCurrentCommitTimestamp
}

task printVersion() {
    println("GIT Version Name: $gitVersionName")
    println("GIT Version Code: $gitVersionCode")
    println("GIT Version Code Time: $gitVersionCodeTime")
}
